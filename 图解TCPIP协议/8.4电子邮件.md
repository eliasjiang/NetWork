
## 电子邮件的工作机制

提供电子邮件服务的协议叫做SMTP（Simple Mail Transfer Protocol）。SMTP为了实现高效发送邮件内容，在其传输层使用了TCP协议。

为此，在技术上改变了以往直接在发送端与接收端主机之间建立TCP连接的机制，而引进了一种一直会连接电源的邮件服务器（由于在传输层以上的网络中对通信进行转播，因此邮件服务器相当于1.9.7节中介绍的网关。） 。发送和接收端通过邮件服务器进行收发邮件。接收端从邮件服务器接收邮件时使用POP3（Post Office Protocol）协议。

电子邮件的机制由3部分组成，它们分别是邮件地址，数据格式以及发送协议。

## 邮件地址
现在，电子邮件的发送地址由DNS进行管理。DNS中注册有邮件地址及其作为发送地址时对应的邮件服务器的域名。这些映射信息被称作MX记录。

## MIME

很长一段时间里，互联网中的电子邮件只能处理文本格式的（由文字组成的信息。过去的电子邮件，就日本来说人们只能发送7比特 JIS编码的信息。） 邮件。不过现在，电子邮件所能发送的数据类型已被扩展到MIME（Multipurpose Internet Mail Extensions，广泛用于互联网并极大地扩展了数据格式，还可以用于WWW和NetNews中。） ，可以发送静态图像、动画、声音、程序等各种形式的数据。鉴于MIME规定了应用消息的格式，因此在OSI参考模型中它相当于第6层表示层。

## SMTP

随着电子邮件使用的普及，那些漫天的广告邮件和包含钓鱼连接的垃圾邮件成为了日益严重的问题。由于SMTP本身没有验证发送者的功能，因此人们无法避免这类邮件到达自己的邮件服务器。不过现在，通过“POP before SMTP”或“SMTP认证”（SMTP Authentication）等功能进行认证，以此防止冒充发送者的人也越来越多。

## POP

个人电脑不可能长时间处于开机状态。只有用户在使用时才会开机。在这种情况下，人们希望一开机就能接收到邮件。然而SMTP没有这种处理机制。SMTP的一个不利之处就在于它支持的是发送端主机的行为，而不是根据接收端的请求发送邮件

为了解决这个问题，就引入了POP协议。如图8.14所示，该协议是一种用于接收电子邮件的协议。发送端的邮件根据SMTP协议将被转发给一直处于插电状态的POP服务器。客户端再根据POP协议从POP服务器接收对方发来的邮件。在这个过程中，为了防止他人盗窃邮件内容，还要进行用户验证。

## IMAP

IMAP（Internet Message Access Protocol） 与POP类似，也是接收电子邮件的协议。在POP中邮件由客户端进行管理，而在IMAP中邮件则由服务器进行管理。

有了IMAP人们就可以通过个人电脑、公司的电脑、笔记本电脑以及智能手机等连接到IMAP服务器以后进行收发邮件。由此，在公司下载的电子邮件就不必在笔记本电脑和智能手机上转来转去（不过笔记本电脑和智能手机必须能够连上IMAP服务器才行。） 。IMAP确实为使用多种异构终端的人们提供了非常便利的环境。